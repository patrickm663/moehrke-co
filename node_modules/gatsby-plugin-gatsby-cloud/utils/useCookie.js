"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

exports.__esModule = true;
exports.default = void 0;

var _react = require("react");

var _jsCookie = _interopRequireDefault(require("js-cookie"));

var _indicatorContext = _interopRequireDefault(require("../context/indicatorContext"));

const useCookie = () => {
  const rootDomain = location.hostname.split(`.`).reverse().splice(0, 2).reverse().join(`.`);
  const {
    cookies,
    setCookies
  } = (0, _react.useContext)(_indicatorContext.default);
  const setCookie = (0, _react.useCallback)((name, value) => {
    _jsCookie.default.set(name, value, {
      domain: rootDomain
    });

    const newValue = {
      [`${name}`]: value
    };
    setCookies(newValue);
  }, []);
  const getCookie = (0, _react.useCallback)(name => _jsCookie.default.get(name), []);
  const removeCookie = (0, _react.useCallback)(name => {
    _jsCookie.default.remove(name, {
      domain: rootDomain
    });

    if (name in cookies) {
      delete cookies[name];
      setCookies(cookies);
    }
  }, []);
  (0, _react.useEffect)(() => {
    const allCookies = _jsCookie.default.get();

    setCookies(allCookies);
  }, []);
  return {
    cookies,
    setCookie,
    getCookie,
    removeCookie
  };
};

var _default = useCookie;
exports.default = _default;